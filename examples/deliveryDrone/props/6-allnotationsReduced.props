// Drone Goal Model – PCTL Properties (without invalid X-in-G formulas)
// Model: DTMC in your <prism> snippet

// ==============================
// G0 – sequence semantics [G1;G2;G3;G4;G5]
// ==============================

P>=1 [ G ( G2_pursued=1
           => (G1_achieved=1 & G3_achieved=0 & G4_achieved=0 & G5_achieved=0) ) ];

P>=1 [ G ( G3_pursued=1
           => (G1_achieved=1 & G2_achieved=1 & G4_achieved=0 & G5_achieved=0) ) ];

P>=1 [ G ( G4_pursued=1
           => (G1_achieved=1 & G2_achieved=1 & G3_achieved=1 & G5_achieved=0) ) ];

P>=1 [ G ( G5_pursued=1
           => (G1_achieved=1 & G2_achieved=1 & G3_achieved=1 & G4_achieved=1) ) ];

P>=1 [ G ( G0_achieved=1
           => (G1_achieved=1 & G2_achieved=1 & G3_achieved=1 & G4_achieved=1 & G5_achieved=1) ) ];

P=? [ F (G0_achieved=1) ];


// ==============================
// G1 – interleaved AND [T1#T2]
// ==============================

P>=1 [ G ( G1_achieved=1
           => (T1_achieved=1 & T2_achieved=1) ) ];

P>0 [ (T2_achieved=0) U (T1_achieved=1 & T2_achieved=0) ];

P>0 [ (T1_achieved=0) U (T2_achieved=1 & T1_achieved=0) ];


// ==============================
// G2 – interleaved OR [G7#G8]
// ==============================

P>=1 [ G ( G2_achieved=1
           => (G7_achieved=1 | G8_achieved=1) ) ];

P>0 [ F ( G2_achieved=1 & G7_achieved=1 & G8_achieved=0 ) ];

P>0 [ F ( G2_achieved=1 & G8_achieved=1 & G7_achieved=0 ) ];

P>0 [ F ( G2_pursued=1 & G7_pursued=1 & G8_pursued=0 ) ];

P>0 [ F ( G2_pursued=1 & G8_pursued=1 & G7_pursued=0 ) ];


// ==============================
// G3 – choice OR [+], non-idempotent
// ==============================

// Each profile is selectable

P>0 [ F ( G3_pursued=1 & G3_chosen=1 ) ];

P>0 [ F ( G3_pursued=1 & G3_chosen=2 ) ];

P>0 [ F ( G3_pursued=1 & G3_chosen=3 ) ];

// Non-idempotent choice: once a profile is chosen, others are never pursued

P>=1 [ G ( G3_chosen=1
           => (G10_pursued=0 & G11_pursued=0) ) ];

P>=1 [ G ( G3_chosen=2
           => (G9_pursued=0 & G11_pursued=0) ) ];

P>=1 [ G ( G3_chosen=3
           => (G9_pursued=0 & G10_pursued=0) ) ];

// NOTE: A precise "next-step stickiness" with X cannot be written in PRISM PCTL
// without mixing path/state levels in ways the parser rejects.
// These invariants already enforce that you cannot switch to another profile
// once one has been chosen.


// ==============================
// G4 – degradation [G12@2->G13]
// ==============================

P>=1 [ G ( G13_pursued=1 => G12_failed>=2 ) ];

P>0 [ F ( G4_pursued=1 & G12_failed=2 & G13_pursued=1 ) ];

P>=1 [ G ( G4_achieved=1
           => (G12_achieved=1 | G13_achieved=1) ) ];

P>0 [ F ( G4_achieved=1 & G12_achieved=1 & G13_achieved=0 ) ];


// ==============================
// G5 – degradation [G14->G15] (INTENDED vs ACTUAL)
// ==============================

P>=1 [ G ( G5_achieved=1
           => (G14_achieved=1 | G15_achieved=1) ) ];

P>0 [ F ( G5_achieved=1 & G14_achieved=1 & G15_achieved=0 ) ];

// Counterexample: shows current model allows going straight to G15
P>0 [ F ( G5_pursued=1 & G15_pursued=1 & G14_pursued=0 ) ];